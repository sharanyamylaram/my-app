{"version":3,"sources":["components/edit.component.js"],"names":["currentUser","token","required","value","className","role","email","isEmail","firstname","length","match","lastname","location","mobileno","vpassword","Edit","props","load","params","id","users","Emails","map","user","passes","password","first","last","loc","mob","all","n","index","i","onChangeEmail","e","target","onChangePassword","onChangefirstname","onChangelastname","onChangelocation","onChangemobileno","handleRegister","preventDefault","setState","successful","form","validateAll","checkBtn","context","_errors","dispatch","updateUser","then","history","push","window","reload","state","this","getAllUsers","onSubmit","ref","c","htmlFor","type","name","onChange","validations","disabled","style","paddingLeft","paddingRight","borderRadius","display","Component","connect","auth","message"],"mappings":"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","file":"static/js/9.26a0cd02.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\nimport { getAllUsers, register, updateUser } from \"../actions/auth\";\r\nimport { connect } from \"react-redux\";\r\n\r\nvar currentUser = {};\r\nvar token = \"\";\r\n\r\nconst required = (value) => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = (value) => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst firstname = (value) => {\r\n  if (value.length < 3 || value.length > 20 || !value.match(\"[a-zA-Z_]+\")) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid Name.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst lastname = (value) => {\r\n  if (value.length < 3 || value.length > 20 || !value.match(\"[a-zA-Z_]+\")) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid Name.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst location = (value) => {\r\n  if (value.length < 3 || value.length > 20 || !value.match(\"[a-zA-Z_]+\")) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid Location.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mobileno = (value) => {\r\n  if (!value.match(\"^[0-9]{10}$\")) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid Number.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = (value) => {\r\n  if (\r\n    !value.match(\r\n      \"^.*(?=.{8,})(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])[a-zA-Z0-9@#$%^&+=]*$\"\r\n    )\r\n  ) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        <ul>\r\n          <li>The password must be min 8 characters.</li>\r\n          <li>\r\n            Must contain atleast one uppercase, lowercase and a special\r\n            character.\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nclass Edit extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      successful: false,\r\n    };\r\n  }\r\n  componentWillMount() {\r\n    this.props.dispatch(getAllUsers());\r\n  }\r\n\r\n  load = () => {\r\n    token = this.props.match.params.id;\r\n    //console.log(this.props.users);\r\n    if (this.props.users) {\r\n      var Emails = this.props.users.map((user) => user.email);\r\n      var passes = this.props.users.map((user) => user.password);\r\n      var first = this.props.users.map((user) => user.firstname);\r\n      var last = this.props.users.map((user) => user.lastname);\r\n      var loc = this.props.users.map((user) => user.location);\r\n      var mob = this.props.users.map((user) => user.mobileno);\r\n      var id = this.props.users.map((user) => user.id);\r\n      var all = [...Emails, ...passes, ...first, ...last, ...loc, ...mob];\r\n      var n = all.length / 6;\r\n      var index = \"\";\r\n      //console.log(all);\r\n      //console.log(id);\r\n      for (var i = 0; i < id.length; i++) {\r\n        if (token == id[i]) {\r\n          index = i;\r\n        }\r\n      }\r\n      currentUser.email = all[index];\r\n      currentUser.password = all[index + n];\r\n      currentUser.firstname = all[index + n + n];\r\n      currentUser.lastname = all[index + n + n + n];\r\n      currentUser.location = all[index + n + n + n + n];\r\n      currentUser.mobileno = all[index + n + n + n + n + n];\r\n      //console.log(currentUser);\r\n    }\r\n  };\r\n\r\n  onChangeEmail = (e) => {\r\n    currentUser.email = e.target.value;\r\n    /*  this.setState({\r\n      email: e.target.value,\r\n    }); */\r\n  };\r\n\r\n  onChangePassword = (e) => {\r\n    currentUser.password = e.target.value;\r\n  };\r\n\r\n  onChangefirstname = (e) => {\r\n    currentUser.firstname = e.target.value;\r\n  };\r\n  onChangelastname = (e) => {\r\n    currentUser.lastname = e.target.value;\r\n  };\r\n  onChangelocation = (e) => {\r\n    currentUser.location = e.target.value;\r\n  };\r\n  onChangemobileno = (e) => {\r\n    currentUser.mobileno = e.target.value;\r\n  };\r\n\r\n  handleRegister = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      successful: false,\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      this.props\r\n        .dispatch(\r\n          updateUser(\r\n            currentUser.email,\r\n            currentUser.password,\r\n            currentUser.firstname,\r\n            currentUser.lastname,\r\n            currentUser.location,\r\n            currentUser.mobileno,\r\n            token\r\n          )\r\n        )\r\n        .then(() => {\r\n          this.setState({\r\n            successful: true,\r\n          });\r\n          this.props.history.push(\"/profile\");\r\n          window.location.reload();\r\n        });\r\n    } else {\r\n      this.setState({\r\n        successful: false,\r\n      });\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <Form\r\n            onSubmit={this.handleRegister}\r\n            ref={(c) => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            {this.load()}\r\n\r\n            {!this.state.successful && (\r\n              <div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"email\">Email</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    className=\"form-control \"\r\n                    name=\"email\"\r\n                    value={currentUser.email}\r\n                    onChange={this.onChangeEmail}\r\n                    validations={[required, email]}\r\n                    disabled\r\n                  ></Input>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"firstname\">Firstname</label>\r\n                  <Input\r\n                    type=\"firstname\"\r\n                    className=\"form-control\"\r\n                    name=\"firstname\"\r\n                    value={currentUser.firstname}\r\n                    onChange={this.onChangefirstname}\r\n                    validations={[required, firstname]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"lastname\">Lastname</label>\r\n                  <Input\r\n                    type=\"lastname\"\r\n                    className=\"form-control\"\r\n                    name=\"lastname\"\r\n                    value={currentUser.lastname}\r\n                    onChange={this.onChangelastname}\r\n                    validations={[required, lastname]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"location\">Location</label>\r\n                  <Input\r\n                    type=\"location\"\r\n                    className=\"form-control\"\r\n                    name=\"location\"\r\n                    value={currentUser.location}\r\n                    onChange={this.onChangelocation}\r\n                    validations={[required, location]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"mobileno\">Mobile No</label>\r\n                  <Input\r\n                    type=\"mobileno\"\r\n                    className=\"form-control\"\r\n                    name=\"mobileno\"\r\n                    value={currentUser.mobileno}\r\n                    onChange={this.onChangemobileno}\r\n                    validations={[required, mobileno]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"password\">Password</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"password\"\r\n                    value={currentUser.password}\r\n                    onChange={this.onChangePassword}\r\n                    validations={[required, vpassword]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <button\r\n                    className=\"btn btn-warning \"\r\n                    style={{\r\n                      paddingLeft: 50,\r\n                      paddingRight: 50,\r\n                      borderRadius: 50,\r\n                    }}\r\n                  >\r\n                    Confirm\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={(c) => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  const { users } = state.auth;\r\n  const { message } = state.message;\r\n  return {\r\n    user,\r\n    users,\r\n    message,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Edit);\r\n"],"sourceRoot":""}